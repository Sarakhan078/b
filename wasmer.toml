[package]
entrypoint = "start"

[dependencies]
"python/python" = "=3.12.3"
"wasmer/bash" = "=1.0.24"

[phases.setup]
nixPkgs = ["python311", "python311Packages.virtualenv", "gcc", "coreutils"]

[phases.install]
cmds = [
  "python3 -m venv venv",
  "./venv/bin/pip install --upgrade pip",
  "./venv/bin/pip install -r requirements.txt",
  "mkdir -p ./bin",
  "gcc raj.c -o ./bin/bgmi -lm",
  "chmod +x ./bin/bgmi"
]

[start]
# Binary background में चलेगा और python main process बनेगा
cmd = "./bin/bgmi & exec ./venv/bin/python a.py"
